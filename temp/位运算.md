# 位运算

## &（按位与）

两个都为真才为真

```js
1&1=1 , 1&0=0 , 0&1=0 , 0&0=0

3&5 = 1 <=> 011&101 = 001 
```

## &&（逻辑与）

左右两边的表达式为真则为真，且`&&`左边的表达式为真的情况下才计算右边的表达式

逻辑与的值当表达式的结果为真时，值为后一项表达式的值，当表达式的值为假时，若第一个表达式为真，则值为第二个表达式的值，否则为第一个表达式的值，如下所示：

```js
1&&3 // 3
0&&3 // 0
1&&false // false
```

## |（按位或）

一个为真就为真

```js
1|0 = 1 , 1|1 = 1 , 0|0 = 0 , 0|1 = 1

6||2 = 6 <=> 0110||0010 = 0110
```

## ||（逻辑或）

两边的表达式有一个为真则为真，且`||`左边的表达式为真的情况下不去计算右边的表达式，具体值与`&&`逻辑类似。

## ^（异或运算符）

同为假，异为真

```JS
1^0 = 1 , 1^1 = 0 , 0^1 = 1 , 0^0 = 0

5^9 = 12 <=> 0101^1001 = 1100
```

## >>（右移运算符） 

`5>>2`的意思为5的二进制位往右挪两位，正数左边补0，负数补1

```js
0101 >> 2 -> 0001 = 1 

-5>>2 
// -5的二进制表示 1111 1011
源码: 0000 0101
取反: 1111 1010
补码: 1111 1011 (补码=取反+1)
 
-5>>2: 1111 1110
取反:   0000 0001  
源码:   0000 0010 (源码=取反+1)
-5>>2 = -2

-2 = 1111 1111
-2>>2: 1111 1111

-1 : 1111 1110
取反: 0000 0001  
-5>>2 = -1
```

## <<（左移运算符）

`5<<2`的意思为5的二进制位往左挪两位，右边补0

```js
0101 << 2 -> 010100 = 20 
```

## ~（取反运算符）

取反就是1为0,0为1

```js
~5 = -6 <=> 0000 0101 -> 1111 1010
```

## 位运算使用实例：

- 检测整数n是否是2的次幂

```js
n&(n-1) === 0 
```

- a^b^b = a
- 数 a 向右移一位，相当于将 a 除以 2；数 a 向左移一位，相当于将 a 乘以 2

```js
var a = 2;
a >> 1; // 1
a << 1; // 4
```

- 交换两个数

```js
a ^= b;
b ^= a;
a ^= b;
```

- 判断奇数、偶数

```js
a&1 === 0 // 偶数
```

- 交换符号

```js
function reversal(a) {
  return ~a + 1; // 整数取反加1，正好变成其对应的负数(补码表示)；负数取反加一，则变为其原码，即正数
}
```

- x & (x - 1) 用于消去x最后一位的1

```js
let x = 12; //1100
x - 1 = 11; //1011
X&(x-1) = 8; //1000

// 统计给定数二进制中1的个数
function count(n){
    let len = 0;
    while(n){
        n = n&(n-1);
        len++;
    }
    return len;
}
```


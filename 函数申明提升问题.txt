今天遇到这样一个问题，以下代码在其它浏览器中运行正常，在36.0.4版本或者更低版本的火狐浏览器上面报错：

if(XXX){
  s();
  
  function s(){
    console.log("...");
  }
}

原因分析：
在火狐浏览器中函数申明“function s” 不会被提升，导致在申明前面调用“s()”时报错，而在其它浏览器中函数申明是会被提升的，运行代码没有问题；

具体原因分析：
根据 ECMAScript 规范第 13 章 Function Definition 和第 14 章 Program 中的描述，函数声明只能出现在 Program（程序，即全局环境）或函数体内，也就是说函数声明不能出现在块（ 如 if、while 或 for 语句）中，因此上面的写法与规范相违背；

再者Firefox 的 TraceMonkey 引擎对函数声明的处理与 ECMAScript 规范的要求不符，TraceMonkey 将块中的函数声明作为“函数语句”来处理。而其他浏览器的引擎仍将这类块中的函数声明当作该块之外的函数声明来解析。

按照规范而言，ff里面报错是对的，反倒是其他浏览器能够执行是不对的啦，因为他们有悖于ECMA规范。但是各浏览器对函数申明的解析不同，所以申明提升也就不一样了。
终上所述：函数申明尽量按照ECMA的规范去编写，以免出现兼容性问题。
 